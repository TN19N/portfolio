# yaml-language-server: $schema=https://moonrepo.dev/schemas/project.json

stack: frontend
layer: application

fileGroups:
  assets:
    - assets/**/*
  sources:
    - src/**/*
    - Cargo.toml
    - Dioxus.toml
    - .env
  tests:
    - tests/**/*

tasks:
  build/release:
    command: dx build --release 
    inputs:
      - "@globs(sources)"
      - "@globs(assets)"
  test:
    command: cargo test
    inputs:
      - "@globs(sources)"
      - "@globs(tests)"
  check:
    command: cargo check
    inputs:
      - "@globs(sources)"
  fmt/check:
    command: cargo fmt
    args: ["--check"]
    inputs:
      - "@globs(sources)"
  clippy/check:
    command: cargo clippy
    args: ["--", "--deny", "warnings"]
    inputs:
      - "@globs(sources)"
